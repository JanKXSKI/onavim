NR == h + 1 {
    exit
}

{
    sub(u, "~")
}

NR == 1 {
    printf("\033[0m\033[48;5;237m%-*.*s\033[0m\033[38;5;245m", w, w, $0)
}

NR > 1 {
    printf("\n%-*s", w, $0)
}
