#! /usr/bin/env bash

fnd1='\( -regex "./[^/]*" $* \)'
fnd2='\( -type d -exec printf "%s:d\n" {} \; -o -name *.swp -o -print \)'

gsed 's#^.*$#-o -regex &/[^/]*#' |
    xargs bash -c "find . -mindepth 1 $fnd1 $fnd2 -o -prune" -- | LC_ALL=C sort -f -t: -k1,1 |
    gawk -v n="$1" -v h=$2  -f $(dirname $0)/ExplorerList.awk
